(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,a){e.exports=a(32)},30:function(e,t,a){},32:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),o=a(8),r=a.n(o),l=a(6),s=a(1),c=a(2),u=a(4),m=a(3),d=a(5),v=a(9),f=a.n(v);f.a.setAppElement("#root");var p="6156345e952a1ea8f63f83962610e7c9",h=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).addDetailsToMovie=function(e){return new Promise(function(t,n){var i="https://api.themoviedb.org/3/movie/".concat(e.id,"?api_key=").concat(p);fetch(i).then(function(e){return e.json()}).then(function(n){e.details=n,a.setState({movie:e}),t()},function(e){a.setState({isLoaded:!0,error:e}),n()})})},a.onClickDetailButton=function(){a.state.movie.details?a.setState({showModal:!0}):a.addDetailsToMovie(a.state.movie).then(a.setState({showModal:!0}))},a.handleCloseModal=function(e){a.setState({showModal:!1})},a.state={showModal:!1,movie:a.props.movie},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.movie,a=e.showModal;return i.a.createElement("div",null,i.a.createElement("div",{className:"card",onClick:this.onClickDetailButton},i.a.createElement("div",{id:"popularity"},Math.round(100*t.popularity)/100),t.poster_path?i.a.createElement("img",{src:"https://image.tmdb.org/t/p/w500/"+t.poster_path,alt:t.title}):i.a.createElement("div",{className:"no-image"},i.a.createElement("img",{src:"./img/no-image-icon.jpg"})),i.a.createElement("div",{id:"title"},i.a.createElement("img",{src:"./img/film-icon.png",alt:"film-icon"}),t.title),i.a.createElement("div",{id:"release-date"},t.release_date)),i.a.createElement(f.a,{isOpen:a,contentLabel:"Details",className:"Modal",overlayClassName:"Overlay",onRequestClose:this.handleCloseModal},t.details&&i.a.createElement("div",{className:"modal-container"},i.a.createElement("i",{className:"fas fa-times-circle",onClick:this.handleCloseModal}),i.a.createElement("div",{className:"modal-header"},i.a.createElement("div",{className:"title"},t.title,i.a.createElement("div",{className:"tagline"},t.details.tagline))),i.a.createElement("ul",null,t.details.overview&&i.a.createElement("li",null,i.a.createElement("small",null,"Overview:\xa0"),i.a.createElement("span",{className:"overview"},t.details.overview)),t.details.runtime&&i.a.createElement("li",null,i.a.createElement("small",null,"Runtime:\xa0"),t.details.runtime," min"),i.a.createElement("li",null,i.a.createElement("small",null,"Genres:\xa0"),i.a.createElement("div",{className:"genres"},t.details.genres&&t.details.genres.map(function(e){return i.a.createElement("div",{className:"genre"},e.name)})))))))}}]),t}(i.a.Component),g=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).onDropdownSelected=function(e){a.props.setYear(e.target.value)},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"createSelectItems",value:function(){for(var e=(new Date).getFullYear(),t=[],a=0;a<=5;a++)t.push(i.a.createElement("option",{key:a,value:e-a},e-a));return t}},{key:"render",value:function(){return i.a.createElement("header",null,i.a.createElement("nav",null,i.a.createElement("div",{className:"mv-header mv-align-center"},i.a.createElement("i",{className:"fas fa-film fa-3x"}),i.a.createElement("h1",null,"Hit Movie Searcher"),i.a.createElement("select",{onChange:this.onDropdownSelected},this.createSelectItems()))))}}]),t}(i.a.Component),E=(Math.floor(window.innerHeight/430)+1)*Math.floor((window.innerWidth-180)/250),y="6156345e952a1ea8f63f83962610e7c9",w=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).trackScrolling=function(){if(a.state.hasLoadedAll||a.state.isLoading)return!1;window.pageYOffset+window.innerHeight+50>document.body.clientHeight&&(a.setState({isLoading:!0}),setTimeout(function(){a.showMore(E),a.setState({isLoading:!1})},1200))},a.setYear=function(e){a.setState({year:e}),a.setState({movies:[]}),a.getMoviesByPage(1)},a.addDetailsToMovie=function(e,t){return new Promise(function(n,i){var o="https://api.themoviedb.org/3/movie/".concat(e.id,"?api_key=").concat(y);fetch(o).then(function(e){return e.json()}).then(function(i){e.details=i,a.setState(function(t){[].concat(Object(l.a)(t.movies),[e])}),t(e),n()},function(e){a.setState({isLoaded:!0,error:e}),i()})})},a.sortMoviesByReleaseDate=function(){var e=a.state.movies;e.sort(function(e,t){return e.release_date<t.release_date?-1:1}),a.setState({movies:e})},a.removeLowPopularityMovies=function(){var e,t=a.state.movies;for(e=0;e<t.length;e++)t[e].popularity<10&&t.pop(e);a.setState({movies:t})},a.hasLowPopularityMovie=function(){var e;for(e=0;e<a.state.movies.length;e++)if(a.state.movies[e].popularity<10)return!0;return!1},a.getMoviesByPage=function(e){var t=a.state.year,n="https://api.themoviedb.org/3/discover/movie?api_key=6156345e952a1ea8f63f83962610e7c9&language=en-US&sort_by=popularity.desc&include_video=false&page=".concat(e,"&primary_release_year=").concat(t);fetch(n).then(function(e){return e.json()}).then(function(t){if(a.setState(function(e){return{isLoaded:!0,movies:[].concat(Object(l.a)(e.movies),Object(l.a)(t.results)),total_pages:t.total_pages}}),e>=a.state.total_pages||a.hasLowPopularityMovie())return a.removeLowPopularityMovies(),a.sortMoviesByReleaseDate(),!1;a.getMoviesByPage(e+1)},function(e){a.setState({isLoaded:!0,error:e})})},a.showMore=function(e){a.setState(function(t){return{num_of_current_displayed:t.num_of_current_displayed+e}})},a.state={movies:[],error:null,isLoaded:!1,total_pages:0,current_page:0,isLoading:!1,lastpage:0,hasLoadedAll:!1,num_of_current_displayed:0,year:(new Date).getFullYear()},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("scroll",this.trackScrolling)}},{key:"componentWillMount",value:function(){0==E&&(E=5),this.setState({num_of_current_displayed:E}),this.getMoviesByPage(1)}},{key:"render",value:function(){var e=this.state,t=e.movies,a=e.isLoading,n=(e.hasLoadedAll,e.num_of_current_displayed);return i.a.createElement(i.a.Fragment,null,i.a.createElement(g,{setYear:this.setYear}),i.a.createElement("div",{className:"App"},i.a.createElement("div",{className:"mv-container mv-align-center"},t.filter(function(e,t){return t<n}).map(function(e){return i.a.createElement("div",null,i.a.createElement(h,{movie:e,key:e.id}))})),a&&n<t.length?i.a.createElement("div",{class:"load"},i.a.createElement("i",{class:"fas fa-spinner fa-3x fa-spin"})):""))}}]),t}(i.a.Component),_=(a(30),document.getElementById("root"));r.a.render(i.a.createElement(w,null),_)}},[[14,2,1]]]);
//# sourceMappingURL=main.a7e55198.chunk.js.map